# 📋 5chBBS 機能実装まとめ

---

## 🏗️ 基本構成

| 項目 | 技術 |
|------|------|
| フロントエンド | Next.js (Pages Router) + TypeScript |
| データベース | Supabase |
| デプロイ | Vercel + GitHub |
| スタイリング | Tailwind CSS + shadcn/ui + Radix UI |
| アイコン | Lucide Icons + 絵文字 |
| アニメーション | Framer Motion |

---

## 📌 実装された機能一覧

### 1. 掲示板の基本機能
- **板（ボード）一覧表示** - カテゴリ別にグループ化
- **スレッド一覧表示** - 板ごとのスレッド管理
- **スレッド作成** - タイトル・名前・本文入力
- **レス投稿** - スレッドへの返信機能
- **レスアンカー** - `>>1` 形式でジャンプ可能
- **sage機能** - メール欄に「sage」でスレッドを上げない
- **1000レス制限** - 1000レスでスレッド終了

### 2. 投稿者識別機能
- **日替わりID** - IPアドレスと日付から生成
- **ID色分け** - 投稿者ごとに異なる色で表示

### 3. リアクション機能
- 👍 いいね
- 😂 笑い
- 🤔 考え中
- 😢 悲しい
- 🔥 炎上/熱い

### 4. お気に入り機能 ⭐
- **スレッド一覧で星マーク** - ワンクリックでお気に入り登録
- **スレッド詳細で星マーク** - ヘッダーからお気に入り登録
- **トップページにお気に入り表示** - 登録したスレッドを一覧表示
- **LocalStorage保存** - ブラウザに保存して永続化

### 5. ダークモード/ライトモード 🌓
- **テーマ切り替えボタン** - 全ページの右上に配置
- **設定の永続化** - LocalStorageに保存
- **ライトモード** - 落ち着いたスレートグレー基調
- **ダークモード** - 深いネイビー基調

### 6. HOTバッジ 🔥
- **勢いが2.0以上** (1時間に2レス以上)
- **または投稿数が50件以上**
- スレッド一覧で赤いバッジで表示

### 7. 板のソート機能
- **新しい投稿があった板が上位に表示**
- カテゴリも最終更新順でソート

---

## 🎨 デザイン特徴

| 要素 | ダークモード | ライトモード |
|------|--------------|--------------|
| 背景 | 深いネイビー (`#0a0a0f`) | スレートグレー (`bg-slate-200`) |
| カード | 半透明白 + ボーダー | 白背景 + シャドウ |
| グラデーション | インディゴ/シアン | インディゴ/スカイ |
| ID色 | 薄い背景 + 明るい文字 | 濃い背景 + 白文字 |

---

## 📁 主要ファイル構成

```
pages/
├── index.tsx              # トップページ
├── board/
│   └── [boardId]/
│       ├── index.tsx      # スレッド一覧
│       ├── new.tsx        # 新規スレッド作成
│       └── thread/
│           └── [threadId].tsx  # スレッド詳細
└── api/
    ├── boards/            # 板API
    ├── threads/           # スレッドAPI
    └── posts/             # 投稿API

lib/
├── supabase.ts            # Supabaseクライアント
└── utils.ts               # ユーティリティ関数

supabase/
├── schema.sql             # テーブル定義
├── seed.sql               # 初期データ
├── seed-more.sql          # 追加データ
└── seed-extra.sql         # さらに追加データ
```

---

## 🗄️ データベース構造

| テーブル | 説明 |
|----------|------|
| `boards` | 板情報（名前、説明、カテゴリ） |
| `threads` | スレッド（タイトル、投稿数、ステータス） |
| `posts` | 投稿（内容、投稿者ID、名前、メール） |
| `reactions` | リアクション（投稿ID、タイプ） |

---

## 🐛 解決した問題

1. **ハイドレーションエラー** - Lucide Iconsの動的インポート問題 → 絵文字で代替
2. **スクロール問題** - ヘッダー固定を解除
3. **ライトモードの見づらさ** - 色味調整、コントラスト改善
4. **ID番号の視認性** - モードに応じた色分け対応

---

## 🚀 使い方

### ローカル開発
```bash
npm install
npm run dev
```

### 環境変数（.env.local）
```
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
```

### Supabaseセットアップ
1. Supabaseダッシュボードで `schema.sql` を実行
2. `seed.sql` でダミーデータを投入
3. 必要に応じて `seed-more.sql`、`seed-extra.sql` を実行

---

## 📝 今後の拡張案

- [ ] 画像投稿機能
- [ ] ユーザー認証（任意）
- [ ] 管理者機能（投稿削除）
- [ ] 検索機能
- [ ] 通知機能
- [ ] NGワードフィルター

---

*最終更新: 2026年1月*
